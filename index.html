<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MOUSTACHE</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Bodoni+Moda:ital,opsz,wght@0,6..96,400;0,6..96,700;0,6..96,900;1,6..96,400&family=Special+Elite&family=VT323&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="css/main.css" />
    <link rel="stylesheet" href="css/effects.css" />
    <link rel="stylesheet" href="css/conspiracy.css" />
  </head>
  <body>
    <!-- VHS / GRAIN / GLITCH overlays -->
    <div id="vhs-overlay" aria-hidden="true"></div>
    <div id="grain-overlay" aria-hidden="true"></div>
    <div id="glitch-overlay" aria-hidden="true"></div>
    <svg id="red-strings" class="red-strings-svg" aria-hidden="true"></svg>

    <!-- PERSISTENT: Truth Rating + Timer bar -->
    <div id="truth-bar" class="truth-bar" style="display: none">
      <div class="truth-bar-inner">
        <div class="truth-bar-left">
          <span class="truth-bar-label">TRUTH RATING</span>
          <span class="truth-bar-value" id="truth-value">0</span>
        </div>
        <div class="truth-meter">
          <div class="truth-meter-fill" id="truth-meter-fill"></div>
        </div>
        <div class="truth-bar-right">
          <span class="truth-bar-label">TIME IN FILE</span>
          <span class="truth-bar-value" id="time-display">0:00</span>
        </div>
      </div>
      <div class="truth-status" id="truth-status">BLISSFULLY IGNORANT</div>
    </div>

    <!-- Sound toggle -->
    <button id="sound-toggle" class="sound-toggle" aria-label="Toggle sound">
      <span class="sound-off">&#9834;</span>
    </button>

    <!-- Hidden mustache icon for evidence room -->
    <div id="mustache-icon" class="mustache-icon" title="?">
      <svg viewBox="0 0 120 40" fill="currentColor">
        <path
          d="M60 30c-8 0-14-6-20-12C34 12 26 8 18 8 8 8 2 16 2 22c0 4 2 7 6 7 6 0 10-6 16-10 4-3 8-5 12-5h0c0 0 0 0 0 0h0c4 0 8 2 12 5 6 4 10 10 16 10 4 0 6-3 6-7 0-6-6-14-16-14-8 0-16 4-22 10C66 24 68 30 60 30z"
        />
      </svg>
    </div>

    <!-- ====== PREROLL: Video Intro ====== -->
    <section id="act-preroll" class="act active">
      <div class="preroll-container">
        <video
          id="preroll-video"
          src="media/moustache_ride_intro_video.mp4"
          playsinline
          style="display: none"
        ></video>
        <div
          class="preroll-countdown"
          id="preroll-countdown"
          style="display: none"
        >
          Your Moustache Ride Begins in
          <span id="preroll-seconds">8</span> seconds
        </div>
        <div class="preroll-label">(video plays with sound)</div>
        <button class="preroll-play btn-primary" id="preroll-play">
          <span class="btn-text">&#9654; BEGIN BRIEFING</span>
        </button>
        <button class="preroll-skip" id="preroll-skip">
          skip video and have slightly less fun
        </button>
      </div>
    </section>

    <!-- ====== ACT 0: TITLE ====== -->
    <section id="act-title" class="act">
      <div class="title-content">
        <svg
          viewBox="0 0 400 120"
          fill="none"
          class="hero-stache"
          aria-hidden="true"
        >
          <path
            d="M200 95c-28 0-48-20-68-42C112 28 88 10 58 10 22 10 2 42 2 62c0 16 8 26 22 26 20 0 36-18 54-34 14-12 28-18 42-18h0c14 0 28 6 42 18 18 16 34 34 54 34 14 0 22-10 22-26 0-20-20-52-56-52-30 0-54 18-74 43C188 75 228 95 200 95z"
            fill="currentColor"
          />
        </svg>
        <h1 class="title-heading">
          <span class="title-the">THE</span>
          <span class="title-main">MOUSTACHE</span>
          <span class="title-sub">INVESTIGATION</span>
        </h1>
        <p class="title-tagline">
          Can you tell Tom Selleck from Burt Reynolds?
        </p>
        <p class="title-question" id="title-question">
          ...Or are they the same person?
        </p>
        <button class="btn-primary" id="start-btn">
          <span class="btn-text">BEGIN</span>
        </button>
        <p class="title-footnote">
          This investigation will change how you see mustaches forever.<br />You
          have been warned.
        </p>
      </div>
    </section>

    <!-- ====== ACT 1: THE QUIZ ====== -->
    <section id="act-quiz" class="act">
      <div class="quiz-container">
        <!-- HUD -->
        <div class="quiz-hud">
          <div class="hud-item">
            <span class="hud-label">CASE FILE</span>
            <span class="hud-value" id="round-display">1 / 8</span>
          </div>
          <div class="hud-item">
            <span class="hud-label">CORRECT</span>
            <span class="hud-value" id="score-display">0</span>
          </div>
        </div>

        <!-- Loading -->
        <div id="quiz-loading" class="quiz-loading">
          <div class="loading-spinner"></div>
          <p id="loading-text" class="loading-text">
            Consulting mustache database...
          </p>
        </div>

        <!-- Photo + Answer -->
        <div id="quiz-photo" class="quiz-photo" style="display: none">
          <div class="polaroid" id="polaroid">
            <div class="polaroid-inner">
              <img
                id="photo-img"
                src=""
                alt="Subject photograph"
                crossorigin="anonymous"
              />
              <div
                id="photo-fallback"
                class="photo-fallback"
                style="display: none"
              >
                <div class="fallback-exhibit" id="fallback-exhibit"></div>
                <div class="fallback-desc" id="fallback-desc"></div>
                <div class="fallback-era" id="fallback-era"></div>
              </div>
            </div>
            <div class="polaroid-caption">
              <span id="exhibit-label"></span>
              <span id="era-label"></span>
            </div>
          </div>
          <div class="hint-area" id="hint-area"></div>
          <div class="answer-buttons" id="answer-buttons">
            <button class="btn-answer btn-tom" id="btn-selleck">
              <span class="btn-answer-name">TOM SELLECK</span>
            </button>
            <button class="btn-answer btn-burt" id="btn-reynolds">
              <span class="btn-answer-name">BURT REYNOLDS</span>
            </button>
          </div>
        </div>

        <!-- Result flash -->
        <div id="quiz-result" class="quiz-result" style="display: none">
          <div class="result-icon" id="result-icon"></div>
          <div class="result-text" id="result-text"></div>
        </div>
      </div>
    </section>

    <!-- ====== THE TURN: The question that breaks everything ====== -->
    <section id="act-turn" class="act">
      <div class="turn-content" style="visibility: hidden">
        <div class="turn-score">
          You scored <span id="turn-score">0</span>/8.
          <span id="turn-score-comment"></span>
        </div>
        <div class="turn-pause"></div>
        <p class="turn-text turn-line" data-delay="1500">
          But that's not why you're here.
        </p>
        <div class="turn-pause"></div>
        <p class="turn-question turn-line" data-delay="4000">
          Have you ever seen Tom Selleck and Burt Reynolds in the same room?
        </p>
        <div class="turn-pause"></div>
        <p class="turn-text turn-line" data-delay="7500">Take your time.</p>
        <p class="turn-text turn-line" data-delay="9500">
          Really think about it.
        </p>
        <div class="turn-pause"></div>
        <p class="turn-text turn-line" data-delay="13000">
          You're not sure, are you?
        </p>
        <div class="turn-pause"></div>
        <button
          class="btn-primary turn-line"
          data-delay="16000"
          id="enter-investigation-btn"
        >
          <span class="btn-text">OPEN THE FILE</span>
        </button>
      </div>
    </section>

    <!-- ====== ACT 2: THE FEVER DREAM ====== -->
    <section id="act-feverdream" class="act">
      <div id="fever-stage" class="fever-stage"></div>
    </section>

    <!-- Popup container -->
    <div id="popup-container" aria-live="polite"></div>

    <!-- Scripts -->
    <script src="js/data.js"></script>
    <script src="js/audio.js"></script>
    <script src="js/effects.js"></script>
    <script src="js/evidence.js"></script>
    <script src="js/feverdream.js"></script>
    <script src="js/secrets.js"></script>
    <script src="js/game.js"></script>
  </body>
</html>
